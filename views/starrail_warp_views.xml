<?xml version="1.0"?>
<odoo>
    <menuitem id="menu_warps_root" name="Warps" sequence="30"/>

    <!-- SR.WARP -->
    <record id="starrail_warps_view_tree" model="ir.ui.view">
        <field name="name">starrail.warps.tree</field>
        <field name="model">sr.warp</field>
        <field name="arch" type="xml">
            <tree string="Warps">
                <field name="name"/>
                <field name="rank_type"/>
                <field name="time"/>
                <field name="banner_id"/>
                <field name="banner_type_id"/>
            </tree>
        </field>
    </record>
    <record id="starrail_warps_view_form" model="ir.ui.view">
        <field name="name">starrail.warps.form</field>
        <field name="model">sr.warp</field>
        <field name="arch" type="xml">
            <form string="Warps">
                <field name="name"/>
                <field name="rank_type"/>
                <field name="time"/>
                <field name="pity"/>
                <field name="banner_id"/>
                <field name="banner_type_id"/>
            </form>
        </field>
    </record>

    <record id="starrail_warp_action" model="ir.actions.act_window">
        <field name="name">Warps</field>
        <field name="res_model">sr.warp</field>
        <field name="view_mode">tree,form</field>
    </record>

    <menuitem id="menu_warps" name="Warps" sequence="0" 
        parent="starrail.menu_warps_root"
        action="starrail_warp_action"/>

    <!-- SR.BANNER -->
    <record id="starrail_banner_view_tree" model="ir.ui.view">
        <field name="name">starrail.banner.tree</field>
        <field name="model">sr.banner</field>
        <field name="arch" type="xml">
            <tree string="Banners">
                <field name="name"/>
                <field name="gacha_type_id"/>
            </tree>
        </field>
    </record>

    <record id="starrail_banner_view_form" model="ir.ui.view">
        <field name="name">starrail.banner.form</field>
        <field name="model">sr.banner</field>
        <field name="arch" type="xml">
            <form string="Banners">
                <field name="name"/>
                <field name="active"/>
                <field name="gacha_type_id"/>
                <field name="banner_key"/>
            </form>
        </field>
    </record>

    <record id="starrail_banner_action" model="ir.actions.act_window">
        <field name="name">Banners</field>
        <field name="res_model">sr.banner</field>
        <field name="view_mode">tree,form</field>
    </record>

    <menuitem id="menu_banners" name="Banners" sequence="10" 
        parent="starrail.menu_warps_root"
        action="starrail_banner_action"/>
    
    <!-- SR.BANNER.TYPE -->
    <record id="starrail_banner_type_view_tree" model="ir.ui.view">
        <field name="name">starrail.banner.type.tree</field>
        <field name="model">sr.banner.type</field>
        <field name="arch" type="xml">
            <tree string="Banner Types" editable="top">
                <field name="name"/>
                <field name="active"/>
                <field name="pity_level"/>
            </tree>
        </field>
    </record>

    <record id="starrail_banner_type_action" model="ir.actions.act_window">
        <field name="name">Banner Types</field>
        <field name="res_model">sr.banner.type</field>
        <field name="view_mode">tree</field>
    </record>

    <menuitem id="menu_banner_types" name="Banner Types" sequence="20"
        parent="starrail.menu_warps_root"
        action="starrail_banner_type_action"/>

    <!-- PLAYER -->
    <record id="button_starrail_warpdata" model="ir.actions.server">
        <field name="name">Get Warp Data</field>
        <field name="model_id" ref="base.model_res_users"/>
        <field name="state">code</field>
        <field name="code">record.get_warps()</field>
    </record>

    <record id="view_users_form_inherit_sr_player" model="ir.ui.view">
        <field name="name">res.users.form.inherit.starrail</field>
        <field name="model">res.users</field>
        <field name="arch" type="xml">
            <data>
                <xpath expr="//page" position="before">
                    <page string="Player Data" name="srdata" attrs="{'invisible': [('active','=',False)]}">
                        <button name="get_warps" string="Refresh Warps" type="object" 
                            class="btn-primary" attrs="{'invisible': ['|', ('active','=',False), ('sr_update','=',False)]}"/>
                        <field name="sr_uid"/>
                        <field name="sr_authkey"/>
                        <field name="sr_update" widget="boolean_toggle"/>
                    </page>
                </xpath>
            </data>
        </field>
    </record>
</odoo>